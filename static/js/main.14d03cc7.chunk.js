(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{16:function(e,t,c){},17:function(e,t,c){},19:function(e,t,c){},22:function(e,t,c){},43:function(e,t,c){},44:function(e,t,c){},45:function(e,t,c){},46:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c(0),r=c.n(a),o=c(4),s=c.n(o),i=(c(16),c(3)),u=(c(17),c(18),c(5));c(19);function l(e){var t=e.onSubmit,c=Object(a.useState)(""),r=Object(i.a)(c,2),o=r[0],s=r[1];return Object(n.jsx)("header",{className:"Searchbar",children:Object(n.jsxs)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),""!==o.trim()?(t(o),s("")):u.b.warn("You have to type something!")},children:[Object(n.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(n.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(n.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:o,onChange:function(e){s(e.currentTarget.value.toLowerCase())}})]})})}var j=c(9),b=(c(22),c(23),c(10)),d=c.n(b),m=(c(43),function(e){var t=e.id,c=e.url,a=e.tags,r=e.largeImgUrl;return Object(n.jsx)("li",{className:"ImageGalleryItem",children:Object(n.jsx)("img",{src:c,alt:a,className:"ImageGalleryItem-image","data-url":r})},t)});c(44);var h=function(e){var t=e.onClick;return Object(n.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load More"})};var f={fetchPictures:function(e,t){return fetch("".concat("https://pixabay.com/api/","?image_type=photo&orientation=horizontal&q=").concat(e,"&page=").concat(t,"&per_page=12&key=").concat("19028300-83b376d79bd6a99c9e2183deb")).then((function(e){return e.ok?e.json():Promise.reject(new Error("Something is wrong, please try again"))}))}};c(45);function O(e){var t=e.onClose,c=e.src,r=e.alt,o=function(e){"Escape"===e.code&&t()};Object(a.useEffect)((function(){return window.addEventListener("keydown",o),function(){window.removeEventListener("keydown",o)}}));return Object(n.jsx)("div",{className:"Overlay",onClick:function(e){e.target===e.currentTarget&&t()},children:Object(n.jsx)("div",{className:"Modal",children:Object(n.jsx)("img",{src:c,alt:r})})})}var g="idle",p="pending",v="resolved",x="rejected",S=document.querySelector("#modal-root");function y(e){var t=e.onLoadMore,c=e.query,r=e.page,s=Object(a.useState)(null),l=Object(i.a)(s,2),b=l[0],y=l[1],w=Object(a.useState)(g),N=Object(i.a)(w,2),k=N[0],C=N[1],E=Object(a.useState)([]),F=Object(i.a)(E,2),I=F[0],L=F[1],M=Object(a.useState)({url:"",alt:""}),q=Object(i.a)(M,2),P=q[0],T=q[1],U=Object(a.useState)(!1),B=Object(i.a)(U,2),G=B[0],R=B[1],D=Object(a.useRef)(!0);Object(a.useEffect)((function(){D.current?D.current=!1:(C(p),J())}),[c]),Object(a.useEffect)((function(){1!==r&&J()}),[r]);var J=function(){f.fetchPictures(c,r).then((function(e){L(1===r?e.hits:function(t){return[].concat(Object(j.a)(t),Object(j.a)(e.hits))}),C(v),1!==r&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(e){y(e),C(x)}))},_=function(){R((function(e){return!e}))};return"idle"===k?Object(n.jsx)("div",{className:"message",children:"Let's find some nice pictures!"}):"pending"===k?Object(n.jsx)(d.a,{type:"ThreeDots",color:"#00BFFF",height:120,width:120,style:{textAlign:"center"}}):"rejected"===k?u.b.error(b):"resolved"===k?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("ul",{className:"ImageGallery",onClick:function(e){var t=e.target.dataset.url,c=e.target.alt;T({url:t,alt:c}),_()},children:I.map((function(e){return Object(n.jsx)(m,{id:"".concat(e.id),url:e.webformatURL,tags:e.tags,largeImgUrl:e.largeImageURL})}))}),Object(n.jsx)(h,{onClick:t}),G&&Object(o.createPortal)(Object(n.jsx)(O,{src:P.url,alt:P.alt,onClose:_}),S)]}):Object(n.jsx)("div",{className:"message",children:"We didn't find such picture..."})}function w(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),c=t[0],r=t[1],o=Object(a.useState)(1),s=Object(i.a)(o,2),j=s[0],b=s[1];return Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)(l,{onSubmit:function(e){r(e),b(1)}}),Object(n.jsx)(y,{onLoadMore:function(){b((function(e){return e+1}))},query:c,page:j}),Object(n.jsx)(u.a,{autoClose:3e3})]})}s.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(w,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.14d03cc7.chunk.js.map